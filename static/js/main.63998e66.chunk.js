(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{326:function(e,t,a){e.exports=a(604)},331:function(e,t,a){},332:function(e,t,a){},333:function(e,t,a){},524:function(e,t,a){},525:function(e,t,a){},526:function(e,t,a){},564:function(e,t,a){},568:function(e,t,a){},597:function(e,t,a){},598:function(e,t,a){},599:function(e,t,a){e.exports=a.p+"static/media/logo.31605d4f.png"},600:function(e,t,a){},604:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),s=a(24),o=a.n(s),i=(a(331),a(26)),r=a(27),c=a(30),u=a(28),d=a(29),h=a(77),m=a(25),p=(a(332),a(11)),g=(a(333),a(613)),v=a(605),f=a(157),b=a(156),w=a(22),k=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).handleChange=function(t){e.setState({query:t.target.value,value:t.target.value})},e.handleSelect=function(t){e.setState({query:"",value:t.formatted_address})},e.state={query:"",value:""},e.handleChange=e.handleChange.bind(Object(p.a)(Object(p.a)(e))),e.handleSelect=e.handleSelect.bind(Object(p.a)(Object(p.a)(e))),e}return Object(d.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.query,n=t.value;return l.a.createElement("div",{className:"search"},l.a.createElement(f.a,{params:{key:"AIzaSyDFtzabY5k6-NOC6V1h3b-LjftEvZyW2MY",libraries:"places,geocode"},render:function(t){return t&&l.a.createElement("div",{className:"search-bar"},l.a.createElement(b.a,{autocompletionRequest:{input:a},googleMaps:t,onSelectSuggest:e.handleSelect},l.a.createElement(g.a,{className:"search-form",placeholder:"Search for location (address, zip code..)",onChange:e.handleChange,value:n})),l.a.createElement(m.b,{to:{pathname:"/Results/"+n,state:{place:n}}},l.a.createElement(v.a,{className:"ui color2 button"},"Search")))}}))}}]),t}(n.Component),E=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"Home"},l.a.createElement("p",{className:"intro"},"Looking for a boba place?",l.a.createElement("br",null),"Have no idea what to get at a boba shop?",l.a.createElement("br",null),"Want to leave a review for specific boba at a place?",l.a.createElement("br",null),"Search for a place to find boba places (and reviews of their menu) nearby. Login to leave reviews."),l.a.createElement(k,null))}}]),t}(n.Component),y=(a(524),a(266)),S=a(144),O=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={email:"",password:"",redirect:!1,message:""},a.login=a.login.bind(Object(p.a)(Object(p.a)(a))),a.handlelogin=a.handlelogin.bind(Object(p.a)(Object(p.a)(a))),a.handleError=a.handleError.bind(Object(p.a)(Object(p.a)(a))),a.handleChangeEmail=a.handleChangeEmail.bind(Object(p.a)(Object(p.a)(a))),a.handleChangePassword=a.handleChangePassword.bind(Object(p.a)(Object(p.a)(a))),a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"login",value:function(){var e=this,t=this.state.email,a=this.state.password,n=w.auth();""!==t&&""!==a?(n.onAuthStateChanged(function(t){t&&e.handlelogin()}),n.signInWithEmailAndPassword(t,a).catch(function(t){return e.handleError(t.message)})):this.handleError("invalid email/password")}},{key:"handlelogin",value:function(){this.props.updatelogin(!0),this.setState({redirect:!0})}},{key:"handleError",value:function(e){this.setState({message:e})}},{key:"handleChangeEmail",value:function(e){this.setState({email:e.target.value})}},{key:"handleChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"render",value:function(){var e=this;if(this.state.redirect)return l.a.createElement(h.a,{to:"/Profile"});var t=l.a.createElement("p",null);return this.state.message&&(t=l.a.createElement("p",{className:"errorMessage"}," ",this.state.message," ")),l.a.createElement("div",{className:"login"},l.a.createElement("div",{className:"login-field"},t,l.a.createElement(y.a,null,l.a.createElement(y.a.Group,{controlId:"formGroupEmail"},l.a.createElement(S.a,{type:"email",onChange:this.handleChangeEmail,placeholder:"Email"})),l.a.createElement(y.a.Group,{controlId:"formGroupPassword"},l.a.createElement(S.a,{type:"password",onChange:this.handleChangePassword,placeholder:"Password"}))),l.a.createElement(v.a,{id:"login-button",onClick:function(){return e.login()}}," Log In "),l.a.createElement(m.b,{to:"/Signup"},l.a.createElement(v.a,{basic:!0,color:"black",id:"signup-button"}," Don't have an account? Sign up! "))))}}]),t}(n.Component),j=(a(525),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={dummy:"hello world",email:"",password:"",confirmPassword:"",redirect:!1,message:""},a.signup=a.signup.bind(Object(p.a)(Object(p.a)(a))),a.handlelogin=a.handlelogin.bind(Object(p.a)(Object(p.a)(a))),a.handleError=a.handleError.bind(Object(p.a)(Object(p.a)(a))),a.handleChangeEmail=a.handleChangeEmail.bind(Object(p.a)(Object(p.a)(a))),a.handleChangePassword=a.handleChangePassword.bind(Object(p.a)(Object(p.a)(a))),a.handleChangeConfirmPassword=a.handleChangeConfirmPassword.bind(Object(p.a)(Object(p.a)(a))),a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"signup",value:function(){var e=this;console.log("let's do some firebase");var t=this.state.email,a=this.state.password,n=this.state.confirmPassword,l=w.auth(),s=w.database().ref("users");""!==t&&""!==a&&""!==n&&a===n?(l.createUserWithEmailAndPassword(t,a).catch(function(t){return e.handleError(t.message)}),w.auth().onAuthStateChanged(function(a){a&&(console.log("created user uid in database",a.uid),s.child(a.uid).set({email:t,reviews:["init"]}),e.handlelogin())})):this.handleError("invalid email/password")}},{key:"handlelogin",value:function(){this.props.updatelogin(!0),this.setState({redirect:!0})}},{key:"handleError",value:function(e){this.setState({message:e})}},{key:"handleChangeEmail",value:function(e){this.setState({email:e.target.value})}},{key:"handleChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleChangeConfirmPassword",value:function(e){this.setState({confirmPassword:e.target.value})}},{key:"render",value:function(){var e=this;if(this.state.redirect)return l.a.createElement(h.a,{to:"/Profile"});var t=l.a.createElement("p",null);return this.state.message&&(t=l.a.createElement("p",{className:"errorMessage"}," ",this.state.message," ")),l.a.createElement("div",{className:"signup"},l.a.createElement("div",{className:"signup-field"},t,l.a.createElement(y.a,{className:"signup-input"},l.a.createElement(y.a.Group,{controlId:"formGroupEmail"},l.a.createElement(S.a,{type:"email",className:"email",onChange:this.handleChangeEmail,placeholder:"Email"})),l.a.createElement(y.a.Group,{controlId:"formGroupPassword"},l.a.createElement(S.a,{type:"password",className:"password",onChange:this.handleChangePassword,placeholder:"Password"})),l.a.createElement(y.a.Group,{controlId:"formGroupPassword"},l.a.createElement(S.a,{type:"password",className:"confirmPassword",onChange:this.handleChangeConfirmPassword,placeholder:"Confirm Password"}))),l.a.createElement(v.a,{id:"signup-button",onClick:function(){return e.signup()}}," Sign Up! ")))}}]),t}(n.Component)),C=(a(526),a(104)),R=a.n(C),P=a(615),N=a(105),M=a.n(N),I=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).filterOptions=[{key:"distance",value:"distance",text:"Sort By Distance"},{key:"rating",value:"rating",text:"Sort By Place Rating"}],e.handleFilter=function(t,a){var n=a.value;if(console.log(n),"distance"===n){e.setState({showDrinkDropdown:!1});var l={location:new window.google.maps.LatLng(e.state.geo.lat,e.state.geo.lng),keyword:"(bubble tea) OR (boba)",rankBy:window.google.maps.places.RankBy.DISTANCE},s=new window.google.maps.Map(document.createElement("div"));new window.google.maps.places.PlacesService(s).search(l,function(t){e.setState({results:t})})}"rating"===n&&(e.state.results.sort(function(e,t){return t.rating-e.rating}),e.setState({showDrinkDropdown:!1})),"drink rating"===n&&e.setState({showDrinkDropdown:!0})},e.handleChange=function(t){e.setState({query:t.target.value,value:t.target.value})},e.handleSelect=function(t){e.setState({query:t.formatted_address,value:t.formatted_address})},e.handleDrinkFilter=function(t,a){var n=a.value,l=w.database().ref().child("places"),s=[],o=Object(p.a)(Object(p.a)(e));e.state.results.map(function(t,a){o.setState({place:t}),l.orderByChild("placeId").equalTo(t.id).on("value",function(e){var t,a=0,l="",i=[];if(console.log(o.state.place),e.exists()&&0===a)a++,e.forEach(function(e){l=e.key}),i=e.child(l).val().drinks,t="oolong milk tea"===n?i[0].ourDrinkId:"classic milk tea"===n?i[1].ourDrinkId:"taro milk tea"===n?i[2].ourDrinkId:i[3].ourDrinkId,w.database().ref("drinks").orderByKey().equalTo(t).on("value",function(e){(s=o.state.ratings).push({place:o.state.place,rating:e.child(t).val().avgRating}),o.setState({ratings:s}),s=o.state.ratings.sort(function(e,t){return t.rating-e.rating});var a=[];for(var n in s)console.log(s[n].place),a.push(s[n].place);o.setState({results:a})});else if(0===a){(s=o.state.ratings).push({place:o.state.place,rating:0}),o.setState({ratings:s}),s=o.state.ratings.sort(function(e,t){return t.rating-e.rating});var r=[];for(var c in s)r.push(c.place);o.setState({results:r})}}),console.log(e.state.results)})},e.state={geo:{},results:[],ratings:[],filterOption:"Sort By Distance",showDrinkDropdown:!1,drinkFilterOption:"",query:"",value:"",place:""},e.apiKey="&key=AIzaSyDFtzabY5k6-NOC6V1h3b-LjftEvZyW2MY",e.geolocUrl="https://maps.googleapis.com/maps/api/geocode/json?address=",e.searchUrl="https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=",e.componentDidMount=e.componentDidMount.bind(Object(p.a)(Object(p.a)(e))),e}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.location.state.place;this.setState({query:t,value:t});var a="".concat(this.geolocUrl).concat(t.replace(/\s/g,"+")).concat(this.apiKey);console.log(a),R.a.get(a).then(function(t){e.setState({geo:t.data.results[0].geometry.location});var a={location:new window.google.maps.LatLng(e.state.geo.lat,e.state.geo.lng),keyword:"(bubble tea) OR (boba)",rankBy:window.google.maps.places.RankBy.DISTANCE},n=new window.google.maps.Map(document.createElement("div"));new window.google.maps.places.PlacesService(n).search(a,function(t){e.setState({results:t})})}).catch(function(e){console.log(e)})}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(e.location.state&&e.location.state!==this.props.location.state){var a=e.location.state.place;this.setState({query:a,value:a});var n="".concat(this.geolocUrl).concat(a.replace(/\s/g,"+")).concat(this.apiKey);R.a.get(n).then(function(e){t.setState({geo:e.data.results[0].geometry.location});var a={location:new window.google.maps.LatLng(t.state.geo.lat,t.state.geo.lng),keyword:"(bubble tea) OR (boba)",rankBy:window.google.maps.places.RankBy.DISTANCE},n=new window.google.maps.Map(document.createElement("div"));new window.google.maps.places.PlacesService(n).search(a,function(e){t.setState({results:e})})}).catch(function(e){console.log(e)})}}},{key:"render",value:function(){var e,t=this,a=this.state,n=a.query,s=a.value;return e=0===this.state.results.length?l.a.createElement("p",{className:"noResults"}," Sorry, there are no boba places from this search "):l.a.createElement("div",{className:"cards"},this.state.results.map(function(e,t){return l.a.createElement(m.b,{to:{pathname:"/PlaceReview",state:{place:e,search:s}},key:t},l.a.createElement("div",{className:"bobaPlace"},l.a.createElement("p",{id:"place_name"}," ",e.name," "),l.a.createElement("p",null,e.vicinity),l.a.createElement("span",{id:"place_rating"}," ",e.rating," / 5.0 "),l.a.createElement(M.a,{rating:e.rating,starDimension:"15px",starSpacing:"2px",starRatedColor:"#6FB59B",starEmptyColor:"#D9D9D9"})))})),l.a.createElement("div",{className:"results"},l.a.createElement("div",{className:"top"},l.a.createElement("div",{className:"searchAgain"},l.a.createElement(f.a,{params:{key:"AIzaSyDFtzabY5k6-NOC6V1h3b-LjftEvZyW2MY",libraries:"places,geocode"},render:function(e){return e&&l.a.createElement("div",{className:"searchAgainBar"},l.a.createElement(b.a,{autocompletionRequest:{input:n},googleMaps:e,onSelectSuggest:t.handleSelect},l.a.createElement(g.a,{className:"searchAgainForm",placeholder:"Search for location (address, zip code..)",onChange:t.handleChange,value:s})),l.a.createElement(m.b,{to:{pathname:"/Results/"+s,state:{place:s}}},l.a.createElement(v.a,{className:"searchAgainButton"},"Search")))}})),l.a.createElement("div",{className:"filterDropdown",style:{zIndex:1}},l.a.createElement(P.a,{className:"order-select",onChange:function(e,a){var n=a.value;return t.handleFilter(e,{value:n})},placeholder:this.state.filterOption,fluid:!0,selection:!0,options:this.filterOptions}))),e)}}]),t}(n.Component),x=(a(564),a(148)),D=a.n(x),L=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this)))._isMounted=!1,e.state={showMenuList:!0,showMenuReview:!1,selectedId:"",selectedMenu:"no selected menu",selectedReview:[],selectedPrice:0,dummy:{},ourId:"",drinkArr:[],selectedRating:null},e.handleMenu=e.handleMenu.bind(Object(p.a)(Object(p.a)(e))),e.makeFakeDrinks=e.makeFakeDrinks.bind(Object(p.a)(Object(p.a)(e))),e.makeAFakeDrink=e.makeAFakeDrink.bind(Object(p.a)(Object(p.a)(e))),e}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0,console.log("page loaded",this.props.location.state.place);var e=w.database().ref(),t=e.child("places"),a=this.props.location.state.place,n=this,l="";t.orderByChild("placeId").equalTo(a.id).on("value",function(s){var o=0;if(s.exists()&&0===o)o++,s.forEach(function(e){l=e.key}),n._isMounted&&e.on("value",function(e){n.setState({dummy:e.val(),ourId:l})});else if(0===o){o++;var i=t.push();l="PLC"+i.key;var r=n.makeFakeDrinks(l),c={name:a.name,placeId:a.id,drinks:r};t.child(l).set(c),console.log(t.child(l)),n._isMounted&&e.on("value",function(e){n.setState({dummy:e.val(),ourId:l})})}})}},{key:"makeFakeDrinks",value:function(e){var t=[],a=e,n=w.database().ref("drinks"),l={name:"Oolong Milk Tea",price:3.29,place:a,reviews:["init"],avgRating:0},s={name:"Classic Milk Tea",price:3.29,place:a,reviews:["init"],avgRating:0},o={name:"Taro Milk Tea",price:4.29,place:a,reviews:["init"],avgRating:0},i={name:"Milk Green Tea",price:3.5,place:a,reviews:["init"],avgRating:0};return t.push(this.makeAFakeDrink(l,n)),t.push(this.makeAFakeDrink(s,n)),t.push(this.makeAFakeDrink(o,n)),t.push(this.makeAFakeDrink(i,n)),t}},{key:"makeAFakeDrink",value:function(e,t){var a="DRK"+t.push().key;return t.child(a).set(e),{ourDrinkId:a}}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"handleMenu",value:function(e,t,a){var n=t.value,l=a.drinkArr,s=this,o={},i=0,r=-1,c=0;console.log("click review",e,n,l),w.database().ref().child("reviews").orderByChild("drinkId").equalTo(n[0]).on("value",function(e){for(var t in e.exists()&&e.forEach(function(e){o[e.key]=e.val()}),console.log("revArr",o),o)c+=1,console.log(t),i+=o[t].rating;c>0&&(r=i/c),w.database().ref().child("drinks").child(n[0]).child("avgRating").set(r),s.setState({selectedMenu:n[1].name,selectedPrice:n[1].price,selectedReview:o,showMenuList:!1,selectedRating:r})})}},{key:"backButtonPressed",value:function(e){this.setState({showMenuList:!0}),console.log(this.state.selectedReview)}},{key:"mapDrinks",value:function(){var e=this;if(void 0===this.state.dummy||null===this.state.dummy)return l.a.createElement("li",null," no menu ");var t,a=function(){var a=e.state.dummy.drinks,n=[];for(t in a)a[t].place===e.state.ourId&&n.push(l.a.createElement("div",{className:"menuRow",key:t},l.a.createElement(v.a,{basic:!0,color:"grey",className:"singleMenu",value:[t,a[t]],onClick:function(t,n){var l=n.value;return e.handleMenu(t,{value:l},{drinkArr:a})}},l.a.createElement("p",{className:"drinkName"}," ",a[t].name," "),l.a.createElement("p",{className:"drinkDetails"},"$"+a[t].price," "))));return console.log("buffer",n),{v:n}}();return"object"===typeof a?a.v:void 0}},{key:"mapToppings",value:function(e){for(var t="",a=0;a<e.length-1;a++)t+=e[a]+", ";return t+=e[e.length-1],console.log(t),t}},{key:"render",value:function(){console.log("dummy",this.state.dummy);var e,t=this.props.location.state,n=t.place,s=t.search,o=a(148),i=this,r=o({displayName:"MenuList",render:function(){return l.a.createElement("div",{id:"menuList"},l.a.createElement("p",null," MENU "),i.mapDrinks())}});e=-1===i.state.selectedRating?"No reviews to calculate Average Rating":i.state.selectedRating;var c,u=o({displayName:"MenuReview",render:function(){return l.a.createElement("div",{id:"menuReview"},l.a.createElement(v.a,{onClick:function(e){return i.backButtonPressed(e)},id:"goBackMenuButton",icon:"left arrow",content:"Back to Menu"}),l.a.createElement("div",{className:"selectedMenu"},i.state.selectedMenu),l.a.createElement("div",{className:"selectedDetails"},"$",i.state.selectedPrice," ",l.a.createElement("br",null),"Average Rating: ",e),l.a.createElement("div",{className:"selectedReview"},Object.keys(i.state.selectedReview).map(function(e,t){return l.a.createElement("div",{className:"reviewSection",key:t},l.a.createElement("div",null," ",i.state.selectedReview[e].rating,l.a.createElement(M.a,{rating:i.state.selectedReview[e].rating,starDimension:"15px",starSpacing:"2px",starRatedColor:"#6FB59B",starEmptyColor:"#D9D9D9"})),l.a.createElement("p",{id:"optionsSection"}," Size [",i.state.selectedReview[e].options.size,"] \xb7 Ice [",i.state.selectedReview[e].options.ice,"] \xb7 Sugar [",i.state.selectedReview[e].options.sugar,"] \xb7 Toppings [",i.mapToppings(i.state.selectedReview[e].options.toppings),"] "),l.a.createElement("p",null," ",i.state.selectedReview[e].description," "))})))}});return c=w.auth().currentUser?l.a.createElement(m.b,{to:{pathname:"/WriteReview",state:{place:n,search:s,ourPlaceId:this.state.ourId}}},l.a.createElement(v.a,{id:"reviewButton"}," Leave a Review ")):l.a.createElement("p",{className:"reviewLog"}," Log in to leave a review "),l.a.createElement("div",{className:"placeReview"},l.a.createElement(m.b,{to:{pathname:"/Results/"+this.props.location.state.search,state:{place:this.props.location.state.search}}},l.a.createElement(v.a,{id:"goBack",icon:"left arrow",content:"Back to Search Results",labelPosition:"left"})),l.a.createElement("div",{className:"placeInfo"},l.a.createElement("p",{className:"placeInfoRow"}," ",l.a.createElement("span",{id:"placeName"}," ",n.name," ")," ",c),l.a.createElement("p",null," Place Rating: ",n.rating," ")),l.a.createElement("div",{className:"menuInfo"},this.state.showMenuList?l.a.createElement(r,null):l.a.createElement(u,null)))}}]),t}(n.Component),A=(a(568),a(614)),B=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleMenuSelection=function(e,t){var n=t.value;a.setState({selectedMenu:n}),a.setState({menuOC:a.state.menuOC+1}),a.setState({showMenuWarning:!1})},a.handleSizeSelection=function(e,t){var n=t.value;a.setState({selectedSize:n}),a.setState({sizeOC:a.state.sizeOC+1}),a.setState({showSizeWarning:!1})},a.handleIceSelection=function(e,t){var n=t.value;a.setState({selectedIce:n}),a.setState({iceOC:a.state.iceOC+1}),a.setState({showIceWarning:!1})},a.handleSugarSelection=function(e,t){var n=t.value;a.setState({selectedSugar:n}),a.setState({sugarOC:a.state.sugarOC+1}),a.setState({showSugarWarning:!1})},a.handleToppingSelection=function(e,t){var n=t.value;a.setState({selectedTopping:n}),a.setState({toppingOC:a.state.toppingOC+1})},a.handleRatingSelection=function(e,t){var n=t.value;a.setState({selectedRating:n}),a.setState({ratingOC:a.state.ratingOC+1}),a.setState({showRatingWarning:!1})},a.handleAdditionalReview=function(e,t){var n=t.value;a.setState({additionalReview:n})},a.handleSubmitReview=function(){if(0===a.state.menuOC&&a.setState({showMenuWarning:!0}),0===a.state.sizeOC&&(console.log("Select Size"),a.setState({showSizeWarning:!0})),0===a.state.iceOC&&(console.log("invalid ice"),a.setState({showIceWarning:!0})),0===a.state.sugarOC&&(console.log("invalid sugar"),a.setState({showSugarWarning:!0})),0===a.state.ratingOC)console.log("invalid rating"),a.setState({showRatingWarning:!0});else{console.log("submit review for",a.state.selectedMenu);var e=w.database().ref(),t=e.child("reviews"),n=e.child("drinks"),l=(a.props.location.state.place,Object(p.a)(Object(p.a)(a)),a.state.selectedMenu),s=a.props.location.state.ourPlaceId,o=a.state.selectedRating,i=a.state.selectedTopping;a.state.selectedTopping.includes("no topping")&&1!=a.state.selectedTopping.length&&(i.splice(i.indexOf("no topping"),1),console.log(i));var r={size:a.state.selectedSize,ice:a.state.selectedIce,sugar:a.state.selectedSugar,toppings:i},c=a.state.additionalReview,u="RVW"+t.push().key,d={drinkId:l,placeId:s,options:r,rating:o,description:c};t.child(u).set(d),n.child(l).child("reviews").child(u).set(u),e.child("users").child(w.auth().currentUser.uid).child("reviews").child(u).set(u)}},a.state={menuOptions:[{key:"mango oolong tea",value:"mango oolong tea",text:"Mango Oolong Tea"},{key:"peach oolong tea",value:"peach oolong tea",text:"Peach Oolong Tea"},{key:"oolong tea",value:"oolong tea",text:"Oolong Tea"},{key:"oolong milk tea",value:"oolong milk tea",text:"Oolong Milk Tea"}],selectedMenu:"",selectedSize:"",selectedIce:"",selectedSugar:"",selectedTopping:[],selectedRating:"",additionalReview:"",menuOC:0,sizeOC:0,iceOC:0,sugarOC:0,toppingOC:0,ratingOC:0,showMenuWarning:!1,showSizeWarning:!1,showIceWarning:!1,showSugarWarning:!1,showRatingWarning:!1},a.handleMenuSelection=a.handleMenuSelection.bind(Object(p.a)(Object(p.a)(a))),a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=w.database().ref(),t=(e.child("places"),e.child("drinks")),a=(this.props.location.state.place,this.props.location.state.ourPlaceId),n=this,l=[];t.orderByChild("place").equalTo(a).on("value",function(e){e.forEach(function(e){l.push({key:e.key,value:e.key,text:e.val().name})}),n.setState({menuOptions:l})})}},{key:"render",value:function(){var e=this,t=this.props.location.state.place,a=D()({displayName:"Warning",render:function(){return l.a.createElement("div",{id:"warning",className:"select-warning"},"Select")}});return l.a.createElement("div",{className:"WriteReview"},l.a.createElement("div",{className:"review-section"},l.a.createElement("p",{id:"review-title"}," Write a Review for ",t.name," "),"Menu to review *",this.state.showMenuWarning?l.a.createElement(a,null):null,l.a.createElement(P.a,{className:"dropdown",placeholder:"Search | Select",fluid:!0,search:!0,selection:!0,options:this.state.menuOptions,onChange:function(t,a){var n=a.value;return e.handleMenuSelection(t,{value:n})}}),"Size Option *",this.state.showSizeWarning?l.a.createElement(a,null):null,l.a.createElement(P.a,{className:"dropdown",placeholder:"Select Size Option",fluid:!0,selection:!0,options:[{key:"S",value:"S",text:"S"},{key:"M",value:"M",text:"M"},{key:"L",value:"L",text:"L"},{key:"XL",value:"XL",text:"XL"}],onChange:function(t,a){var n=a.value;return e.handleSizeSelection(t,{value:n})}}),"Ice Level *",this.state.showIceWarning?l.a.createElement(a,null):null,l.a.createElement(P.a,{className:"dropdown",placeholder:"Select Ice Level",fluid:!0,selection:!0,options:[{key:"0%",value:"0%",text:"0%"},{key:"25%",value:"25%",text:"25%"},{key:"50%",value:"50%",text:"50%"},{key:"75%",value:"75%",text:"75%"},{key:"100%",value:"100%",text:"100%"},{key:"33%",value:"33%",text:"33%"},{key:"66%",value:"66%",text:"66%"}],onChange:function(t,a){var n=a.value;return e.handleIceSelection(t,{value:n})}}),"Sugar Level *",this.state.showSugarWarning?l.a.createElement(a,null):null,l.a.createElement(P.a,{className:"dropdown",placeholder:"Select Sugar Level",fluid:!0,selection:!0,options:[{key:"0%",value:"0%",text:"0%"},{key:"25%",value:"25%",text:"25%"},{key:"50%",value:"50%",text:"50%"},{key:"75%",value:"75%",text:"75%"},{key:"100%",value:"100%",text:"100%"},{key:"less",value:"less",text:"less"},{key:"normal",value:"normal",text:"normal"},{key:"more",value:"more",text:"more"}],onChange:function(t,a){var n=a.value;return e.handleSugarSelection(t,{value:n})}}),"Topping(s) *",l.a.createElement(P.a,{className:"dropdown",placeholder:"Search | Select Topping(s)",fluid:!0,selection:!0,multiple:!0,search:!0,options:[{key:"no topping",value:"no topping",text:"no topping"},{key:"pudding",value:"pudding",text:"pudding"},{key:"tapioca",value:"tapioca",text:"tapioca"},{key:"nata jelly",value:"nata jelly",text:"nata jelly"},{key:"red bean",value:"red bean",text:"red bean"},{key:"herbal jelly",value:"herbal jelly",text:"herbal jelly"},{key:"aloe jelly",value:"aloe jelly",text:"aloe jelly"},{key:"fig jelly",value:"fig jelly",text:"fig jelly"},{key:"oreo",value:"oreo",text:"oreo"}],onChange:function(t,a){var n=a.value;return e.handleToppingSelection(t,{value:n})}}),"Rating *",this.state.showRatingWarning?l.a.createElement(a,null):null,l.a.createElement(P.a,{className:"dropdown",placeholder:"Rating",fluid:!0,selection:!0,options:[{key:1,value:1,text:1},{key:2,value:2,text:2},{key:3,value:3,text:3},{key:4,value:4,text:4},{key:5,value:5,text:5}],onChange:function(t,a){var n=a.value;return e.handleRatingSelection(t,{value:n})}}),l.a.createElement(A.a,null,l.a.createElement(A.a.TextArea,{label:"Additional Review",placeholder:"Tell us more about your experience",onChange:function(t,a){var n=a.value;return e.handleAdditionalReview(t,{value:n})}})),l.a.createElement("div",{className:"button-row"},l.a.createElement(m.b,{to:{pathname:"/PlaceReview",state:{place:this.props.location.state.place,search:this.props.location.state.search}}},l.a.createElement(v.a,{onClick:this.handleSubmitReview.bind(this)}," Submit ")," ",l.a.createElement(v.a,null," Cancel ")))))}}]),t}(n.Component),W=(a(569),a(597),n.Component,a(598),a(78)),T=function(e){function t(){var e;return Object(i.a)(this,t),e=Object(c.a)(this,Object(u.a)(t).call(this)),w.auth().currentUser&&e.props.updatelogin(!0),e.state={menu:!1},e.signout=e.signout.bind(Object(p.a)(Object(p.a)(e))),e.dropdown=e.dropdown.bind(Object(p.a)(Object(p.a)(e))),e.hide=e.hide.bind(Object(p.a)(Object(p.a)(e))),e}return Object(d.a)(t,e),Object(r.a)(t,[{key:"signout",value:function(){w.auth().currentUser&&(w.auth().signOut(),console.log("Signing out user")),this.props.updatelogin(!1)}},{key:"dropdown",value:function(){var e=this;this.setState({menu:!this.state.menu},function(){document.addEventListener("click",e.hide)})}},{key:"hide",value:function(e){var t=this;this.setState({menu:!1},function(){document.removeEventListener("click",t.hide)})}},{key:"render",value:function(){var e,t,n=this;return this.props.loggedIn?(e=l.a.createElement("div",{className:"buttons"},l.a.createElement(W.a,{id:"menu",link:!0,name:"bars",size:"big",onClick:function(){return n.dropdown()}}),this.state.menu&&l.a.createElement("ul",{className:"dropdown-menu options"},l.a.createElement(m.b,{to:"/Profile"},l.a.createElement("li",null," Profile ")),l.a.createElement(m.b,{to:"/"},l.a.createElement("li",{onClick:function(){return n.signout()}}," Sign Out ")))),t=l.a.createElement("div",{className:"username"},w.auth().currentUser.email)):e=l.a.createElement("div",{className:"userProfile"},l.a.createElement(m.b,{to:{pathname:"/Login",state:{route:window.location.hash}}},l.a.createElement(v.a,{id:"login-button",basic:!0,color:"black"}," Log In ")),l.a.createElement(m.b,{to:"/Signup"},l.a.createElement(v.a,{id:"signup-button",basic:!0,color:"black"}," Sign Up "))),l.a.createElement("div",{className:"Header"},l.a.createElement(m.b,{to:"/",className:"title-box"},l.a.createElement("img",{src:a(599),className:"logo"}),l.a.createElement("span",{className:"title"}," Boba Buddy ")),l.a.createElement("div",{className:"userProfile"},t,e))}}]),t}(n.Component),z=(a(600),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e)))._isMounted=!1,a.state={oldPassword:"",newPassword:"",message:"",edit:!1,userReviews:[]},a.editPassword=a.editPassword.bind(Object(p.a)(Object(p.a)(a))),a.handleError=a.handleError.bind(Object(p.a)(Object(p.a)(a))),a.handleChangeOldPassword=a.handleChangeOldPassword.bind(Object(p.a)(Object(p.a)(a))),a.handleChangeNewPassword=a.handleChangeNewPassword.bind(Object(p.a)(Object(p.a)(a))),a.changePassword=a.changePassword.bind(Object(p.a)(Object(p.a)(a))),a.handleChange=a.handleChange.bind(Object(p.a)(Object(p.a)(a))),a.componentDidMount=a.componentDidMount.bind(Object(p.a)(Object(p.a)(a))),a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0;var e={},t=this,a=w.auth().currentUser.uid,n=w.auth().currentUser.email;w.database().ref().child("users").orderByChild("email").equalTo(n).on("value",function(n){n.exists()&&(e=n.child(a).val()),t.setState({userReviews:e.reviews})})}},{key:"editPassword",value:function(){this.setState({edit:!0,message:""})}},{key:"handleChangeOldPassword",value:function(e){this.setState({oldPassword:e.target.value})}},{key:"handleChangeNewPassword",value:function(e){this.setState({newPassword:e.target.value})}},{key:"changePassword",value:function(){var e=this,t=w.auth().currentUser,a=w.auth.EmailAuthProvider.credential(t.email,this.state.oldPassword);t.reauthenticateAndRetrieveDataWithCredential(a).then(function(){t.updatePassword(e.state.newPassword).then(e.handleChange(),function(t){return e.handleError(t)}).catch(function(t){return e.handleError(t.message)})},function(t){return e.handleError(t)}).catch(function(t){return e.handleError(t.message)})}},{key:"handleError",value:function(e){this.setState({message:e.message,edit:!0})}},{key:"handleChange",value:function(){this.setState({message:"Password Change Successful",edit:!1})}},{key:"displayReviews",value:function(){for(var e in this.state.userReviews)console.log(this.state.userReviews[e])}},{key:"render",value:function(){var e,t=this;console.log(this.state.userReviews);var a=l.a.createElement("p",null);return this.state.message&&(a=l.a.createElement("p",{className:"errorMessage"}," ",this.state.message," ")),e=this.state.edit?l.a.createElement("div",null,l.a.createElement(y.a,null,l.a.createElement(y.a.Group,{controlId:"formGroupPassword"},l.a.createElement(S.a,{type:"password",onChange:this.handleChangeOldPassword,placeholder:"Current Password"})),l.a.createElement(y.a.Group,{controlId:"formGroupPassword"},l.a.createElement(S.a,{type:"password",onChange:this.handleChangeNewPassword,placeholder:"New Password"}))),l.a.createElement(v.a,{id:"change-button",onClick:function(){return t.changePassword()}}," Change Password ")):l.a.createElement(v.a,{basic:!0,color:"black",id:"edit-password",onClick:function(){return t.editPassword()}}," Edit Password "),l.a.createElement("div",{className:"profileComponent"},l.a.createElement("h2",{className:"profileTitle"}," Your Profile "),l.a.createElement("div",{className:"yourProfile"},l.a.createElement("p",null,"Email: ",w.auth().currentUser.email),a,e))}}]),t}(n.Component)),F=function(e){function t(){var e;Object(i.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).updatelogin=function(t){if(e.setState({loggedIn:t}),t)return l.a.createElement(h.a,{to:"/Profile"})},e.state={loggedIn:!1};var a=!1;return w.auth().onAuthStateChanged(function(t){t&&(a=!0,e.setState({loggedIn:a}))})&&(e.updatelogin=e.updatelogin),e}return Object(d.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement(m.a,{basename:"/"},l.a.createElement(T,{updatelogin:this.updatelogin,loggedIn:this.state.loggedIn}),l.a.createElement(h.d,null,l.a.createElement(h.b,{exact:!0,path:"/",component:E}),l.a.createElement(h.b,{exact:!0,path:"/Login",render:function(){return l.a.createElement(O,{updatelogin:e.updatelogin,loggedIn:e.state.loggedIn})}}),l.a.createElement(h.b,{exact:!0,path:"/Signup",render:function(){return l.a.createElement(j,{updatelogin:e.updatelogin})}}),l.a.createElement(h.b,{exact:!0,path:"/Profile",render:function(){return l.a.createElement(z,{updatelogin:e.updatelogin})}}),l.a.createElement(h.b,{path:"/Results/:id",component:I}),l.a.createElement(h.b,{exact:!0,path:"/PlaceReview",component:L}),l.a.createElement(h.b,{exact:!0,path:"/WriteReview",component:B})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(601),a(602),a(603);w.initializeApp({apiKey:"AIzaSyBeSlCn1ILfNQBg975d47IqsmavBAJRaKc",authDomain:"webdev-final-project-mk-i.firebaseapp.com",databaseURL:"https://webdev-final-project-mk-i.firebaseio.com",projectId:"webdev-final-project-mk-i",storageBucket:"webdev-final-project-mk-i.appspot.com",messagingSenderId:"257965645347"}),o.a.render(l.a.createElement(F,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[326,1,2]]]);
//# sourceMappingURL=main.63998e66.chunk.js.map